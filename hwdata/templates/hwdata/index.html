<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/highcharts-more.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<!-- <script src="refresh_data.js"></script> -->
<script>
    $(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            type: 'gauge',
            plotBorderWidth: 1,
            plotBackgroundColor: {
                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                stops: [
                    [0, '#FFF4C6'],
                    [0.3, '#FFFFFF'],
                    [1, '#FFF4C6']
                ]
            },
            plotBackgroundImage: null,
            height: 200
        },

        title: {
            text: 'Computer current parameters'
        },

        pane: [{
            startAngle: -45,
            endAngle: 45,
            background: null,
            center: ['25%', '145%'],
            size: 300
        }, {
            startAngle: -45,
            endAngle: 45,
            background: null,
            center: ['75%', '145%'],
            size: 300
        }],

        yAxis: [{
            min: 0,
            max: 100,
            minorTickPosition: 'outside',
            tickPosition: 'outside',
            labels: {
                rotation: 'auto',
                distance: 20
            },
            plotBands: [{
                from: 80,
                to: 100,
                color: '#C02316',
                innerRadius: '100%',
                outerRadius: '105%'
            }],
            pane: 0,
            title: {
                text: 'CPU usage<br/><span style="font-size:8px">[ % ]</span>',
                y: -40
            }
        }, {
            min: 0,
            max: 100,
            minorTickPosition: 'outside',
            tickPosition: 'outside',
            labels: {
                rotation: 'auto',
                distance: 20
            },
            plotBands: [{
                from: 80,
                to: 100,
                color: '#C02316',
                innerRadius: '100%',
                outerRadius: '105%'
            }],
            pane: 1,
            title: {
                text: 'SWAP usage<br/><span style="font-size:8px">[ % ]</span>',
                y: -40
            }
        }],

        plotOptions: {
            gauge: {
                dataLabels: {
                    enabled: false
                },
                dial: {
                    radius: '100%'
                }
            }
        },


        series: [{
            {% for data in current_data %}
            data: [{{ data.CPU_usage }}],
            {% endfor %}
            yAxis: 0
        }, {

            {% for data in current_data %}
            data: [{{ data.SWAP_usage }}],
            {% endfor %}
            yAxis: 1
        }]

    },

    // Let the music play
    function(chart) {
        setInterval(function() {
/*            var left = chart.series[0].points[0],
                right = chart.series[1].points[0],
                leftVal,
                inc = (Math.random() - 0.5) * 3;
            inc = 0;

            leftVal =  left.y + inc;
            rightVal = leftVal + inc / 3;
            if (leftVal < -20 || leftVal > 6) {
                leftVal = left.y - inc;
            }
            if (rightVal < -20 || rightVal > 6) {
                rightVal = leftVal;
            }

            left.update(leftVal, false);
            right.update(rightVal, false); */
            chart.redraw();

        }, 500);

    });
});
</script>

{% if current_data %}
        <h3>Hardware data:</h3>
<ul>     <h3>Current values:</h3>
    {% for data in current_data %}
    <li>    CPU usage: {{ data.CPU_usage }} <br>
            SWAP usage: {{ data.SWAP_usage }} <br>
    </li>
    {% endfor %}
</ul>
   <div id="container" style="width:50%; height:400px;"></div>
{% else %}
    <h3> No data! </h3>
{% endif %}
